<aside class="main-sidebar bg-color elevation-0">
	<div class="position-relative" style="padding-bottom: 10px;">
		<%= link_to home_index_path do%>
			<%= image_tag("logo.png", :size => "200x100", class: "position-absolute top", alt: "Sample image") %>
		<%end%>
	</div>

	<!-- Sidebar -->
	<div class="sidebar mt-5">
		<nav class="mt-5">
			<ul class="nav nav-pills flex-column mb-auto">
				<li class="nav-item">
					<%= link_to home_index_path, class: "nav-link "  do%>
						<i class="bi bi-box p-2"></i>Dashboard
					<%end%>
				</li>
				<li class="nav-item">
					<%= link_to users_path, class: "nav-link"  do%>
						<i class="bi bi-people-fill p-2"></i>Employees
					<%end%>
				</li>
				<% if is_admin? %>
					<li class="nav-item">
						<%= link_to roles_path, class: "nav-link"  do%>
							<i class="bi bi-person-fill-up p-2"></i>Roles							
						<%end%>
					</li>
					<li class="nav-item">
						<%= link_to leave_types_path, class: "nav-link"  do%>
							<i class="bi bi-plus-circle p-2"></i>Leave Types
						<%end%>
					</li>
				<%end%>
				<li class="nav-item">
					<%= link_to leave_requests_path, class: "nav-link"  do%>
						<i class="bi bi-journal-text p-2"></i>Leave Requests
					<%end%>
				</li>
				<!-- <% if is_manager? ||  is_employee? %>
					<li class="nav-item">
						<%= link_to new_home_path, class: "nav-link"  do%> 
							<i class="bi bi-arrow-bar-right p-2"></i>Apply Leaves
						<%end%>
					</li>
				<% end %> -->
				<li class="nav-item">
					<%= link_to teams_path, class: "nav-link" do%> 
						<i class="bi bi-people p-2"></i>Teams
					<%end%>
				</li>
				<li class="nav-item">
					<%= link_to policies_path, class: "nav-link" do%> 
						<i class="bi bi-file-earmark-text-fill p-2"></i>Policy
					<%end%>
				</li>
				<!-- li class="nav-item dropdown">
					<a href="#works" class="nav-link dropdown-toggle" data-toggle="dropdown">Works <span
						class="caret"></span>
					</a>
					< Add your dropdown menu items here >
					<div class="dropdown-menu">
						< Example dropdown items >
						<a class="dropdown-item" href="#">Item 1</a>
						<a class="dropdown-item" href="#">Item 2</a>
						<a class="dropdown-item" href="#">Item 3</a>
					</div>
				</li-->
			</ul>
		</nav>
			<!-- /.sidebar-menu -->
	</div>
	<!-- /.sidebar -->
</aside>  
<style>
	.top{
		top: -10px;
		width: 100%;
		height: 100px;
	}
	.active{
		color: red;
	}
	
</style>
<script>
		document.addEventListener("turbo:load", function () {
		function setActiveLink(link) {
			link.classList.add("active");
			localStorage.setItem("activeLink", link.getAttribute("href").substr(1));
		}

		var links = document.querySelectorAll(".nav-link");
		var storedActiveLink = localStorage.getItem("activeLink");

		links.forEach(function (link) {
			link.addEventListener("click", function (event) {
				event.preventDefault();
				links.forEach(function (otherLink) {
					otherLink.classList.remove("active");
				});
				setActiveLink(link);
				window.location.href = link.getAttribute("href");
			});

			if (storedActiveLink === link.getAttribute("href").substr(1)) {
				setActiveLink(link);
			}
		});

		
		document.getElementById("logout-button").addEventListener("click", function () {
			localStorage.removeItem("activeLink");
		});
	});



	<%# document.addEventListener('DOMContentLoaded', function() {
		const sidebar = document.querySelector('.sidebar');
		sidebar.addEventListener('click', function(event) {
			const navLink = event.target.closest('.nav-link');

			if (navLink) {
				event.preventDefault(); 
				const navItems = document.querySelectorAll('.nav-link');
				navItems.forEach(navItem => {
					navItem.classList.remove('active');
				});
				navLink.classList.add('active');
				window.location.href = navLink.getAttribute('href');
			}
		});
	
	}); %>
</script>